<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(ProjectDir)..\..\..\Solutions\Common.proj" />
  <PropertyGroup>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{2F84CA66-4FCB-40DD-903D-10BE663FAE39}</ProjectGuid>
    <OutputType>Exe</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>IronPythonCompiler</RootNamespace>
    <AssemblyName>ipyc</AssemblyName>
    <ApplicationIcon>ipy.ico</ApplicationIcon>
    <PlatformTarget>x86</PlatformTarget>
    <CodeAnalysisRuleSet>IronPythonConsole.ruleset</CodeAnalysisRuleSet>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'FxCop|AnyCPU' ">
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'v2Debug|AnyCPU' ">
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'v2Release|AnyCPU' ">
  </PropertyGroup>
  <ItemGroup>
    <None Include="pyc.py" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="ipy.ico" />
  </ItemGroup>

  <Import Project="$(MSBuildBinPath)\Microsoft.Common.targets" />
  <Target Name="Build" Returns="$(TargetPath)">
    <Exec 
      Command="$(OutputPath)\ipy.exe $(MSBuildProjectDirectory)\pyc.py /embed /target:$(OutputType) /out:$(AssemblyName) /main:pyc.py" />
    <Move SourceFiles="ipyc.exe" DestinationFolder="$(OutputPath)" />
  </Target>
</Project>